
  <!DOCTYPE html>


<html lang="en">
  
<!-- Mirrored from esphome.io/components/light/tuya.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 May 2021 03:01:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta name="description" content="Instructions for setting up a Tuya dimmer switch.">
<meta itemprop="name" content="Tuya Dimmer">
<meta itemprop="description" content="Instructions for setting up a Tuya dimmer switch.">
<meta itemprop="image" content="../../_images/brightness-medium.png">
<meta name="twitter:title" content="Tuya Dimmer">
<meta name="twitter:image:src" content="../../_images/brightness-medium.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@OttoWinter_">
<meta name="twitter:description" content="Instructions for setting up a Tuya dimmer switch.">
<meta property="og:title" content="Tuya Dimmer">
<meta property="og:image" content="../../_images/brightness-medium.png">
<meta property="og:type" content="website">
<meta property="og:description" content="Instructions for setting up a Tuya dimmer switch.">

    <title>Tuya Dimmer &#8212; ESPHome</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="canonical" href="tuya.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Output Component" href="../output/index.html" />
    <link rel="prev" title="RGBWW Light" href="rgbww.html" />
  <link rel="stylesheet" href="../../_static/customf001.css?hash=f908c2b5" type="text/css" />
  <link rel="apple-touch-icon" sizes="180x180" href="../../_static/apple-touch-icon.png">
  <link rel="shortcut icon" href="../../_static/favicon.ico">
  <link rel="icon" type="image/png" sizes="512x512" href="../../_static/favicon-512x512.png">
  <link rel="icon" type="image/png" sizes="256x256" href="../../_static/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="192x192" href="../../_static/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="128x128" href="../../_static/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../_static/favicon-16x16.png">
  <link rel="manifest" href="../../_static/site.webmanifest">
  <link rel="mask-icon" href="../../_static/safari-pinned-tab.svg" color="#646464">
  <meta name="apple-mobile-web-app-title" content="ESPHome">
  <meta name="application-name" content="ESPHome">
  <meta name="msapplication-TileColor" content="#dfdfdf">
  <meta name="msapplication-config" content="/_static/browserconfig.xml">
  <meta name="theme-color" content="#dfdfdf">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta property="og:site_name" content="ESPHome">
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index-2.html">
              <img class="logo" src="../../_static/logo-text.svg" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="https://esphome.io/search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index-2.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tuya Dimmer</a><ul>
<li><a class="reference internal" href="#configuration-variables">Configuration variables:</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="tuya-dimmer">
<h1>Tuya Dimmer<a class="headerlink" href="#tuya-dimmer" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">tuya</span></code> light platform creates a simple brightness-only light from a
tuya serial component.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Some of these dimmers have no way of serial flashing without destroying them.
Make sure you have some way to OTA upload configured before flashing.  This means you need
to have working wifi, ota, and maybe api sections in the config.
The dimmer switch I got would hang if the logger was configured to use the serial port
which meant it was bricked until I cut it open.</p>
</div>
<p>There are two components, the Tuya bus and the dimmer that uses it.  The <a class="reference internal" href="../tuya.html"><span class="doc">Tuya MCU</span></a>
component requires a <a class="reference internal" href="../uart.html#uart"><span class="std std-ref">UART bus</span></a> to be configured.  Put the <code class="docutils literal notranslate"><span class="pre">tuya</span></code> component in
the config and it will list the possible devices for you in the config log.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="c1"># Make sure your WiFi will connect</span>
<span class="nt">wifi</span><span class="p">:</span>
  <span class="nt">ssid</span><span class="p">:</span> <span class="s">&quot;ssid&quot;</span>
  <span class="nt">password</span><span class="p">:</span> <span class="s">&quot;password&quot;</span>

<span class="c1"># Make sure logging is not using the serial port</span>
<span class="nt">logger</span><span class="p">:</span>
  <span class="nt">baud_rate</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="c1"># Enable Home Assistant API</span>
<span class="nt">api</span><span class="p">:</span>

<span class="c1"># Make sure you can upload new firmware OTA</span>
<span class="nt">ota</span><span class="p">:</span>

<span class="c1"># My dimmer used the hardware serial port on the alternate pins</span>
<span class="nt">uart</span><span class="p">:</span>
  <span class="nt">rx_pin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GPIO13</span>
  <span class="nt">tx_pin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GPIO15</span>
  <span class="nt">baud_rate</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">9600</span>

<span class="c1"># Register the Tuya MCU connection</span>
<span class="nt">tuya</span><span class="p">:</span>
</pre></div>
</div>
<p>Here is an example output for a Tuya dimmer:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[21:50:28][C][tuya:024]: Tuya:
[21:50:28][C][tuya:031]:   Datapoint 3: int value (value: 139)
[21:50:28][C][tuya:029]:   Datapoint 1: switch (value: OFF)
</pre></div>
</div>
<p>On this dimmer, the toggle switch is datapoint 1 and the dimmer value is datapoint 3.
Now you can create the light.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a light using the dimmer</span>
<span class="nt">light</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">platform</span><span class="p">:</span> <span class="s">&quot;tuya&quot;</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;dim1&quot;</span>
    <span class="nt">dimmer_datapoint</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
    <span class="nt">min_value_datapoint</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">switch_datapoint</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
<section id="configuration-variables">
<h2>Configuration variables:<a class="headerlink" href="#configuration-variables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>id</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): Manually specify the ID used for code generation.</p></li>
<li><p><strong>name</strong> (<strong>Required</strong>, string): The name of the light.</p></li>
<li><p><strong>dimmer_datapoint</strong> (<em>Optional</em>, int): The datapoint id number of the dimmer value.</p></li>
<li><p><strong>min_value_datapoint</strong> (<em>Optional</em>, int): The datapoint id number of the MCU minimum value
setting.  If this is set then ESPHome will sync the <strong>min_value</strong> to the MCU on startup.</p></li>
<li><p><strong>switch_datapoint</strong> (<em>Optional</em>, int): The datapoint id number of the power switch.  My dimmer
required this to be able to turn the light on and off.  Without this you would only be able to
change the brightness and would have to toggle the light using the physical buttons.</p></li>
<li><p><strong>min_value</strong> (<em>Optional</em>, int, default 0): The lowest dimmer value allowed.  My dimmer had a
minimum of 25 and wouldn’t even accept anything lower, but this option is available if necessary.</p></li>
<li><p><strong>max_value</strong> (<em>Optional</em>, int, default 255): The highest dimmer value allowed.  Most dimmers have a
maximum of 255, but dimmers with a maximum of 1000 can also be found. Try what works best.</p></li>
<li><p>All other options from <a class="reference internal" href="index.html#config-light"><span class="std std-ref">Light</span></a>.</p></li>
<li><p>At least one of <em>dimmer_datapoint</em> or <em>switch_datapoint</em> must be provided.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The MCU on the Tuya dimmer handles transitions and gamma correction on its own.
Therefore the <code class="docutils literal notranslate"><span class="pre">gamma_correct</span></code> setting default is <code class="docutils literal notranslate"><span class="pre">1.0</span></code> and the the
<code class="docutils literal notranslate"><span class="pre">default_transition_length</span></code> parameter is <code class="docutils literal notranslate"><span class="pre">0s</span></code> by default.</p>
</div>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../tuya.html"><span class="doc">Tuya MCU</span></a></p></li>
<li><p><a class="reference internal" href="index.html"><span class="doc">Light Component</span></a></p></li>
<li><p><a class="reference external" href="../../api/tuya__light_8h.html">API Reference</a></p></li>
<li><p><a class="reference external" href="https://github.com/esphome/esphome-docs/blob/current/components/light/tuya.rst">Edit this page on GitHub</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
  <div id="upgrade-footer">
    A new version has been release since you last visited this page: 1.17.2 🎉
    <div class="footer-button-container">
      <div role="button" id="upgrade-footer-dismiss" class="footer-button">Dismiss</div>
      <a id="upgrade-footer-changelog" class="footer-button" href="../../changelog/v1.17.0.html">View Changelog</a>  
    </div>
  </div>
  <script>
    var old = window.localStorage.getItem("version");
    if (old === null) { window.localStorage.setItem("version", "1.17");
    } else if (old !== "1.17") {
      const footerEl = document.getElementById("upgrade-footer");
      footerEl.classList.add("not-hidden");
      footerEl.addEventListener('click', function () {
        window.localStorage.setItem("version", "1.17");
        footerEl.classList.remove("not-hidden");
      });
    }
  </script>

  </body>

<!-- Mirrored from esphome.io/components/light/tuya.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 May 2021 03:01:18 GMT -->
</html>