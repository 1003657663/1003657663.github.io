
  <!DOCTYPE html>


<html lang="en">
  
<!-- Mirrored from esphome.io/components/sensor/teleinfo.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 May 2021 03:00:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta name="description" content="Instructions for setting up French Teleinformation">
<meta name="keywords" content="teleinfo">
<meta itemprop="name" content="Teleinformation from Linky electrical counter.">
<meta itemprop="description" content="Instructions for setting up French Teleinformation">
<meta itemprop="image" content="../../_images/teleinfo.jpg">
<meta name="twitter:title" content="Teleinformation from Linky electrical counter.">
<meta name="twitter:image:src" content="../../_images/teleinfo.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@OttoWinter_">
<meta name="twitter:description" content="Instructions for setting up French Teleinformation">
<meta property="og:title" content="Teleinformation from Linky electrical counter.">
<meta property="og:image" content="../../_images/teleinfo.jpg">
<meta property="og:type" content="website">
<meta property="og:description" content="Instructions for setting up French Teleinformation">

    <title>Teleinformation from Linky electrical counter. &#8212; ESPHome</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="canonical" href="teleinfo.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Template Sensor" href="template.html" />
    <link rel="prev" title="TCS34725 RGB Color Sensor" href="tcs34725.html" />
  <link rel="stylesheet" href="../../_static/customf001.css?hash=f908c2b5" type="text/css" />
  <link rel="apple-touch-icon" sizes="180x180" href="../../_static/apple-touch-icon.png">
  <link rel="shortcut icon" href="../../_static/favicon.ico">
  <link rel="icon" type="image/png" sizes="512x512" href="../../_static/favicon-512x512.png">
  <link rel="icon" type="image/png" sizes="256x256" href="../../_static/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="192x192" href="../../_static/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="128x128" href="../../_static/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../_static/favicon-16x16.png">
  <link rel="manifest" href="../../_static/site.webmanifest">
  <link rel="mask-icon" href="../../_static/safari-pinned-tab.svg" color="#646464">
  <meta name="apple-mobile-web-app-title" content="ESPHome">
  <meta name="application-name" content="ESPHome">
  <meta name="msapplication-TileColor" content="#dfdfdf">
  <meta name="msapplication-config" content="/_static/browserconfig.xml">
  <meta name="theme-color" content="#dfdfdf">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta property="og:site_name" content="ESPHome">
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index-2.html">
              <img class="logo" src="../../_static/logo-text.svg" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="https://esphome.io/search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index-2.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Teleinformation from Linky electrical counter.</a><ul>
<li><a class="reference internal" href="#configuration-variables">Configuration variables:</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="teleinformation-from-linky-electrical-counter">
<h1>Teleinformation from Linky electrical counter.<a class="headerlink" href="#teleinformation-from-linky-electrical-counter" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">teleinfo</span></code> component allows you to retrieve data from a
French electrical counter using Teleinformation (<a class="reference external" href="https://www.enedis.fr/sites/default/files/Enedis-NOI-CPT_54E.pdf">datasheet</a>). It works with Linky electrical
counter but also legacy EDF electrical counter.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/teleinfo-full.jpg"><img alt="../../_images/teleinfo-full.jpg" src="../../_images/teleinfo-full.jpg" style="width: 50.0%;" /></a>
<figcaption>
<p><span class="caption-text">Linky electrical counter</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>A simple electronic assembly with an optocoupler and a resistor could
let you retrieve detailed power consumption or power production.
There is plenty of example on the web.</p>
<p>As the communication with the Teleinformation is done using UART, you need to
have an <a class="reference internal" href="../uart.html#uart"><span class="std std-ref">UART bus</span></a> in your configuration with the <code class="docutils literal notranslate"><span class="pre">rx_pin</span></code>
connected to the output of the optocoupler component. Additionally, you need to
set the baud rate to 9600bps if counter is configured to work in standard
mode or 1200bps in historical mode.  To find out which mode you are using,
simply press -/+ buttons on the counter and look for <cite>Standard mode</cite> or
<cite>Historical mode</cite> as below.</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../../_images/teleinfo-standard.jpg"><img alt="../../_images/teleinfo-standard.jpg" src="../../_images/teleinfo-standard.jpg" style="width: 50.0%;" /></a>
<figcaption>
<p><span class="caption-text">Linky electrical counter configured in standard mode.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/teleinfo-historical.jpg"><img alt="../../_images/teleinfo-historical.jpg" src="../../_images/teleinfo-historical.jpg" style="width: 50.0%;" /></a>
<figcaption>
<p><span class="caption-text">Linky electrical counter configured in historical mode.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="nt">uart</span><span class="p">:</span>
  <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">uart_bus</span>
  <span class="nt">rx_pin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GPIO3</span>
  <span class="nt">tx_pin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GPIO1</span>
  <span class="nt">baud_rate</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1200</span>
  <span class="nt">parity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">EVEN</span>
  <span class="nt">data_bits</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">7</span>

<span class="nt">sensor</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">platform</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">teleinfo</span>
    <span class="nt">tags</span><span class="p">:</span>
     <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;HCHC&quot;</span>
       <span class="nt">sensor</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;hchc&quot;</span>
        <span class="nt">unit_of_measurement</span><span class="p">:</span> <span class="s">&quot;Wh&quot;</span>
        <span class="nt">icon</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mdi:flash</span>
     <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;HCHP&quot;</span>
       <span class="nt">sensor</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;hchp&quot;</span>
        <span class="nt">unit_of_measurement</span><span class="p">:</span> <span class="s">&quot;Wh&quot;</span>
        <span class="nt">icon</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mdi:flash</span>
     <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;PAPP&quot;</span>
       <span class="nt">sensor</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;papp&quot;</span>
        <span class="nt">unit_of_measurement</span><span class="p">:</span> <span class="s">&quot;VA&quot;</span>
        <span class="nt">icon</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mdi:flash</span>
    <span class="nt">update_interval</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">60s</span>
    <span class="nt">historical_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<section id="configuration-variables">
<h2>Configuration variables:<a class="headerlink" href="#configuration-variables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>tags</strong> (<strong>Required</strong>): Specify the tag you want to retrieve from the Teleinformation and select with what name to transmit it.</p>
<ul>
<li><p><strong>name</strong> (<strong>Required</strong>, string): The name of the tag corresponding to what the electrical counter send.</p></li>
<li><p><strong>sensor</strong> (<strong>Required</strong>, <a class="reference internal" href="index.html#config-sensor"><span class="std std-ref">Sensor</span></a>): Associate a sensor with the tag. See options from <a class="reference internal" href="index.html#config-sensor"><span class="std std-ref">Sensor</span></a>.</p></li>
</ul>
</li>
<li><p><strong>historical_mode</strong> (<em>Optional</em>): Wether to use historical mode or standard mode.
With historical mode, baudrate of 1200 must be used whereas 9600 must be used in
standard mode. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>update_interval</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The interval to check the
sensor. Defaults to <code class="docutils literal notranslate"><span class="pre">60s</span></code>.</p></li>
<li><p><strong>uart_id</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): Manually specify the ID of the <a class="reference internal" href="../uart.html#uart"><span class="std std-ref">UART Component</span></a> if you want
to use multiple UART buses.</p></li>
</ul>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="../../api/teleinfo_8h.html">API Reference</a></p></li>
<li><p><a class="reference external" href="https://github.com/esphome/esphome-docs/blob/current/components/sensor/teleinfo.rst">Edit this page on GitHub</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
  <div id="upgrade-footer">
    A new version has been release since you last visited this page: 1.17.2 🎉
    <div class="footer-button-container">
      <div role="button" id="upgrade-footer-dismiss" class="footer-button">Dismiss</div>
      <a id="upgrade-footer-changelog" class="footer-button" href="../../changelog/v1.17.0.html">View Changelog</a>  
    </div>
  </div>
  <script>
    var old = window.localStorage.getItem("version");
    if (old === null) { window.localStorage.setItem("version", "1.17");
    } else if (old !== "1.17") {
      const footerEl = document.getElementById("upgrade-footer");
      footerEl.classList.add("not-hidden");
      footerEl.addEventListener('click', function () {
        window.localStorage.setItem("version", "1.17");
        footerEl.classList.remove("not-hidden");
      });
    }
  </script>

  </body>

<!-- Mirrored from esphome.io/components/sensor/teleinfo.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 May 2021 03:00:21 GMT -->
</html>