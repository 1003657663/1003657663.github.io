
  <!DOCTYPE html>


<html lang="en">
  
<!-- Mirrored from esphome.io/components/sensor/adc.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 May 2021 02:59:02 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta name="description" content="Instructions for setting up built-in analog voltage sensors.">
<meta itemprop="name" content="Analog To Digital Sensor">
<meta itemprop="description" content="Instructions for setting up built-in analog voltage sensors.">
<meta itemprop="image" content="../../_images/flash.png">
<meta name="twitter:title" content="Analog To Digital Sensor">
<meta name="twitter:image:src" content="../../_images/flash.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@OttoWinter_">
<meta name="twitter:description" content="Instructions for setting up built-in analog voltage sensors.">
<meta property="og:title" content="Analog To Digital Sensor">
<meta property="og:image" content="../../_images/flash.png">
<meta property="og:type" content="website">
<meta property="og:description" content="Instructions for setting up built-in analog voltage sensors.">

    <title>Analog To Digital Sensor &#8212; ESPHome</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="canonical" href="adc.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ADE7953 Power Sensor" href="ade7953.html" />
    <link rel="prev" title="Sensor Component" href="index.html" />
  <link rel="stylesheet" href="../../_static/customf001.css?hash=f908c2b5" type="text/css" />
  <link rel="apple-touch-icon" sizes="180x180" href="../../_static/apple-touch-icon.png">
  <link rel="shortcut icon" href="../../_static/favicon.ico">
  <link rel="icon" type="image/png" sizes="512x512" href="../../_static/favicon-512x512.png">
  <link rel="icon" type="image/png" sizes="256x256" href="../../_static/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="192x192" href="../../_static/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="128x128" href="../../_static/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../_static/favicon-16x16.png">
  <link rel="manifest" href="../../_static/site.webmanifest">
  <link rel="mask-icon" href="../../_static/safari-pinned-tab.svg" color="#646464">
  <meta name="apple-mobile-web-app-title" content="ESPHome">
  <meta name="application-name" content="ESPHome">
  <meta name="msapplication-TileColor" content="#dfdfdf">
  <meta name="msapplication-config" content="/_static/browserconfig.xml">
  <meta name="theme-color" content="#dfdfdf">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta property="og:site_name" content="ESPHome">
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index-2.html">
              <img class="logo" src="../../_static/logo-text.svg" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="https://esphome.io/search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index-2.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Analog To Digital Sensor</a><ul>
<li><a class="reference internal" href="#configuration-variables">Configuration variables:</a></li>
<li><a class="reference internal" href="#esp32-attenuation">ESP32 Attenuation</a></li>
<li><a class="reference internal" href="#esp8266-measuring-vcc">ESP8266 Measuring VCC</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="analog-to-digital-sensor">
<h1>Analog To Digital Sensor<a class="headerlink" href="#analog-to-digital-sensor" title="Permalink to this headline">Â¶</a></h1>
<p>The Analog To Digital (<code class="docutils literal notranslate"><span class="pre">adc</span></code>) Sensor allows you to use the built-in
ADC in your device to measure a voltage on certain pins. On the ESP8266
only pin A0 (GPIO17) supports this. On the ESP32 pins GPIO32 through
GPIO39 can be used.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/adc-ui.png"><img alt="../../_images/adc-ui.png" src="../../_images/adc-ui.png" style="width: 80.0%;" /></a>
</figure>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="nt">sensor</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">platform</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">adc</span>
    <span class="nt">pin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">A0</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;Living</span><span class="nv"> </span><span class="s">Room</span><span class="nv"> </span><span class="s">Brightness&quot;</span>
    <span class="nt">update_interval</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">60s</span>
</pre></div>
</div>
<section id="configuration-variables">
<h2>Configuration variables:<a class="headerlink" href="#configuration-variables" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li><p><strong>pin</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-pin"><span class="std std-ref">Pin</span></a>): The pin to measure the voltage on.
Or on the ESP8266 alternatively also <code class="docutils literal notranslate"><span class="pre">VCC</span></code>, see <a class="reference internal" href="#adc-esp8266-vcc"><span class="std std-ref">ESP8266 Measuring VCC</span></a>.</p></li>
<li><p><strong>name</strong> (<strong>Required</strong>, string): The name of the voltage sensor.</p></li>
<li><p><strong>attenuation</strong> (<em>Optional</em>): Only on ESP32. Specify the ADC
attenuation to use. See <a class="reference internal" href="#adc-esp32-attenuation"><span class="std std-ref">ESP32 Attenuation</span></a>.</p></li>
<li><p><strong>update_interval</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The interval
to check the sensor. Defaults to <code class="docutils literal notranslate"><span class="pre">60s</span></code>.</p></li>
<li><p><strong>id</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): Manually specify the ID used for code generation.</p></li>
<li><p>All other options from <a class="reference internal" href="index.html#config-sensor"><span class="std std-ref">Sensor</span></a>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This component prints the voltage as seen by the chip pin. On the ESP8266, this is always 0.0V to 1.0V
Some development boards like the Wemos D1 mini include external voltage divider circuitry to scale down
a 3.3V input signal to the chip-internal 1.0V. If your board has this circuitry, add a multiply filter to
get correct values:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">sensor</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">platform</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">adc</span>
    <span class="c1"># ...</span>
    <span class="nt">filters</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">multiply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3.3</span>
</pre></div>
</div>
</div>
</section>
<section id="esp32-attenuation">
<span id="adc-esp32-attenuation"></span><h2>ESP32 Attenuation<a class="headerlink" href="#esp32-attenuation" title="Permalink to this headline">Â¶</a></h2>
<p>On the ESP32, the voltage measured with the ADC caps out at 1.1V by default as the sensing range
or the attenuation of the ADC is set to <code class="docutils literal notranslate"><span class="pre">0db</span></code> by default.</p>
<p>To measure voltages higher than 1.1V, set <code class="docutils literal notranslate"><span class="pre">attenuation</span></code> to one of the <a class="reference external" href="https://docs.espressif.com/projects/esp-idf/en/latest/api-reference/peripherals/adc.html#_CPPv225adc1_config_channel_atten14adc1_channel_t11adc_atten_t">following values</a>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0db</span></code> for a full-scale voltage of 1.1V (default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2.5db</span></code> for a full-scale voltage of 1.5V</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">6db</span></code> for a full-scale voltage of 2.2V</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">11db</span></code> for a full-scale voltage of 3.9V</p></li>
</ul>
</section>
<section id="esp8266-measuring-vcc">
<span id="adc-esp8266-vcc"></span><h2>ESP8266 Measuring VCC<a class="headerlink" href="#esp8266-measuring-vcc" title="Permalink to this headline">Â¶</a></h2>
<p>On the ESP8266 you can even measure the voltage the <em>chip is getting</em>. This can be useful in situations
where you want to shut down the chip if the voltage is low when using a battery.</p>
<p>To measure the VCC voltage, set <code class="docutils literal notranslate"><span class="pre">pin:</span></code> to <code class="docutils literal notranslate"><span class="pre">VCC</span></code> and make sure nothing is connected to the <code class="docutils literal notranslate"><span class="pre">A0</span></code> pin.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To avoid confusion: It measures the voltage at the chip, and not at the VCC pin of the board. It should usually be around 3.3V.</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">sensor</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">platform</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">adc</span>
    <span class="nt">pin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">VCC</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;VCC</span><span class="nv"> </span><span class="s">Voltage&quot;</span>
</pre></div>
</div>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#sensor-filters"><span class="std std-ref">Sensor Filters</span></a></p></li>
<li><p><a class="reference internal" href="ads1115.html"><span class="doc">ADS1115 Sensor</span></a></p></li>
<li><p><a class="reference internal" href="max6675.html"><span class="doc">MAX6675 K-Type Thermocouple Temperature Sensor</span></a></p></li>
<li><p><a class="reference external" href="../../api/adc__sensor_8h.html">API Reference</a></p></li>
<li><p><a class="reference external" href="https://github.com/esphome/esphome-docs/blob/current/components/sensor/adc.rst">Edit this page on GitHub</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
  <div id="upgrade-footer">
    A new version has been release since you last visited this page: 1.17.2 ðŸŽ‰
    <div class="footer-button-container">
      <div role="button" id="upgrade-footer-dismiss" class="footer-button">Dismiss</div>
      <a id="upgrade-footer-changelog" class="footer-button" href="../../changelog/v1.17.0.html">View Changelog</a>  
    </div>
  </div>
  <script>
    var old = window.localStorage.getItem("version");
    if (old === null) { window.localStorage.setItem("version", "1.17");
    } else if (old !== "1.17") {
      const footerEl = document.getElementById("upgrade-footer");
      footerEl.classList.add("not-hidden");
      footerEl.addEventListener('click', function () {
        window.localStorage.setItem("version", "1.17");
        footerEl.classList.remove("not-hidden");
      });
    }
  </script>

  </body>

<!-- Mirrored from esphome.io/components/sensor/adc.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 May 2021 02:59:04 GMT -->
</html>